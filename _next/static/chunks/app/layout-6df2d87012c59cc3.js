(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7551:function(e,t,a){Promise.resolve().then(a.bind(a,575)),Promise.resolve().then(a.t.bind(a,911,23)),Promise.resolve().then(a.t.bind(a,7960,23))},575:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return d},a:function(){return s}});var n=a(7437),i=a(2265),r=a(3301),l=a(5978),u=a(4257);let o=(0,i.createContext)(void 0);function s(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function d(e){let{children:t}=e,[a,s]=(0,i.useState)(null),[d,m]=(0,i.useState)(null),[c,f]=(0,i.useState)(!0);(0,i.useEffect)(()=>(0,r.Aj)(u.I8,async e=>{if(m(e),e){let t=await (0,l.QT)((0,l.JU)(u.db,"users",e.uid));t.exists()?s(t.data()):s(null)}else s(null);f(!1)}),[]);let b=async(e,t)=>{await (0,r.e5)(u.I8,e,t)},p=async(e,t,a)=>{let{user:n}=await (0,r.Xb)(u.I8,e,t),i={uid:n.uid,email:e,name:a.name||"",role:a.role||"student",registrationNumber:a.registrationNumber,employeeId:a.employeeId,mobileNumber:a.mobileNumber,department:a.department,branch:a.branch,section:a.section,year:a.year,createdAt:(0,l.Bt)()};await (0,l.pl)((0,l.JU)(u.db,"users",n.uid),i),s(i)},h=async()=>{let e=new r.hJ,t=await (0,r.rh)(u.I8,e),a=await (0,l.QT)((0,l.JU)(u.db,"users",t.user.uid)),n=!a.exists();return n||s(a.data()),{isNewUser:n}},y=async()=>{await (0,r.w7)(u.I8),s(null),m(null)},I=async e=>{if(!d)throw Error("No user logged in");let t={...e,updatedAt:(0,l.Bt)()};if(await (0,l.pl)((0,l.JU)(u.db,"users",d.uid),t,{merge:!0}),"faculty"===(e.role||(null==a?void 0:a.role))){let t=e.department||(null==a?void 0:a.department);if(t){let n=(0,l.JU)(u.db,"admin","faculty","branch",t),i=(0,l.JU)(n,"faculty_members",d.uid);await (0,l.pl)(n,{name:t,updatedAt:(0,l.Bt)()},{merge:!0}),await (0,l.pl)(i,{uid:d.uid,name:e.name||(null==a?void 0:a.name)||"",email:d.email,employeeId:e.employeeId||(null==a?void 0:a.employeeId)||"",mobileNumber:e.mobileNumber||(null==a?void 0:a.mobileNumber)||"",department:t,joinedAt:(0,l.Bt)()},{merge:!0})}}s(t=>t?{...t,...e}:null)};return(0,n.jsx)(o.Provider,{value:{currentUser:a,firebaseUser:d,loading:c,signIn:b,signUp:p,signInWithGoogle:h,signOut:y,updateUserProfile:I},children:t})}},4257:function(e,t,a){"use strict";a.d(t,{I8:function(){return s},db:function(){return d}});var n=a(738),i=a(3301),r=a(5978),l=a(7292),u=a(62);let o=0===(0,n.C6)().length?(0,n.ZF)({apiKey:"AIzaSyCriF-OZFtI_SocDqx3FGo3XP_txugfLk8",authDomain:"alietake.firebaseapp.com",projectId:"alietake",storageBucket:"alietake.firebasestorage.app",messagingSenderId:"443363656423",appId:"1:443363656423:web:39544e219f609ab9f1d842",measurementId:"G-23NJJ85VQZ",databaseURL:"https://alietake.firebaseio.com"}):(0,n.Mq)(),s=(0,i.v0)(o),d=(0,r.ad)(o);(0,l.N8)(o),(0,u.cF)(o),a.e(834).then(a.bind(a,6834)).then(e=>{e.getAnalytics(o)})},7960:function(){},911:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[944,358,481,139,379,971,117,744],function(){return e(e.s=7551)}),_N_E=e.O()}]);